"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/stream/route";
exports.ids = ["app/api/stream/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstream%2Froute&page=%2Fapi%2Fstream%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstream%2Froute.ts&appDir=%2FUsers%2Fericzhang%2FDesktop%2FProjects%2FVolatix-main%2FVolatix-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fericzhang%2FDesktop%2FProjects%2FVolatix-main%2FVolatix-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstream%2Froute&page=%2Fapi%2Fstream%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstream%2Froute.ts&appDir=%2FUsers%2Fericzhang%2FDesktop%2FProjects%2FVolatix-main%2FVolatix-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fericzhang%2FDesktop%2FProjects%2FVolatix-main%2FVolatix-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/../node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/../node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_ericzhang_Desktop_Projects_Volatix_main_Volatix_main_src_app_api_stream_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/stream/route.ts */ \"(rsc)/./src/app/api/stream/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/stream/route\",\n        pathname: \"/api/stream\",\n        filename: \"route\",\n        bundlePath: \"app/api/stream/route\"\n    },\n    resolvedPagePath: \"/Users/ericzhang/Desktop/Projects/Volatix-main/Volatix-main/src/app/api/stream/route.ts\",\n    nextConfigOutput,\n    userland: _Users_ericzhang_Desktop_Projects_Volatix_main_Volatix_main_src_app_api_stream_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/stream/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyLmpzP25hbWU9YXBwJTJGYXBpJTJGc3RyZWFtJTJGcm91dGUmcGFnZT0lMkZhcGklMkZzdHJlYW0lMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzdHJlYW0lMkZyb3V0ZS50cyZhcHBEaXI9JTJGVXNlcnMlMkZlcmljemhhbmclMkZEZXNrdG9wJTJGUHJvamVjdHMlMkZWb2xhdGl4LW1haW4lMkZWb2xhdGl4LW1haW4lMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGZXJpY3poYW5nJTJGRGVza3RvcCUyRlByb2plY3RzJTJGVm9sYXRpeC1tYWluJTJGVm9sYXRpeC1tYWluJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN1QztBQUNwSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3ZvbGF0aXgvPzIyYTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2VyaWN6aGFuZy9EZXNrdG9wL1Byb2plY3RzL1ZvbGF0aXgtbWFpbi9Wb2xhdGl4LW1haW4vc3JjL2FwcC9hcGkvc3RyZWFtL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zdHJlYW0vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zdHJlYW1cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3N0cmVhbS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9lcmljemhhbmcvRGVza3RvcC9Qcm9qZWN0cy9Wb2xhdGl4LW1haW4vVm9sYXRpeC1tYWluL3NyYy9hcHAvYXBpL3N0cmVhbS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvc3RyZWFtL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstream%2Froute&page=%2Fapi%2Fstream%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstream%2Froute.ts&appDir=%2FUsers%2Fericzhang%2FDesktop%2FProjects%2FVolatix-main%2FVolatix-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fericzhang%2FDesktop%2FProjects%2FVolatix-main%2FVolatix-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/stream/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/stream/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   fetchCache: () => (/* binding */ fetchCache),\n/* harmony export */   revalidate: () => (/* binding */ revalidate),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var _lib_math_blackscholes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/math/blackscholes */ \"(rsc)/./src/lib/math/blackscholes.ts\");\n/* harmony import */ var _lib_arbitrage_checks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/arbitrage/checks */ \"(rsc)/./src/lib/arbitrage/checks.ts\");\n/* harmony import */ var _lib_ivs_svi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/ivs/svi */ \"(rsc)/./src/lib/ivs/svi.ts\");\n/* harmony import */ var _lib_forecast_expSmooth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/forecast/expSmooth */ \"(rsc)/./src/lib/forecast/expSmooth.ts\");\n/* harmony import */ var _lib_data_providers_polygon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/data/providers/polygon */ \"(rsc)/./src/lib/data/providers/polygon.ts\");\n\n\n\n\n\nconst runtime = \"nodejs\";\nconst dynamic = \"force-dynamic\";\nconst revalidate = 0;\nconst fetchCache = \"force-no-store\";\nfunction randomWalk(px) {\n    return px * Math.exp((Math.random() - 0.5) * 0.002);\n}\nasync function getMarket(symbol) {\n    // Try live Polygon, fallback to synthetic\n    try {\n        const live = await (0,_lib_data_providers_polygon__WEBPACK_IMPORTED_MODULE_4__.fetchOptionChainPolygon)(symbol);\n        if (live && Array.isArray(live.quotes) && live.quotes.length) return live;\n    } catch  {}\n    // synthetic\n    let f0 = 500;\n    const strikes = Array.from({\n        length: 13\n    }, (_, i)=>Math.round(400 + i * 20));\n    const tenors = [\n        5 / 365,\n        15 / 365,\n        30 / 365,\n        60 / 365,\n        90 / 365\n    ];\n    const r = 0.02, q = 0.00;\n    const quotes = [];\n    f0 = randomWalk(f0);\n    for (const T of tenors){\n        for (const K of strikes){\n            const baseIv = 0.20 + 0.08 * Math.max(0, (K - f0) / f0) + 0.02 * (Math.random() - 0.5);\n            const price = (0,_lib_math_blackscholes__WEBPACK_IMPORTED_MODULE_0__.bsPrice)(\"C\", f0, K, r, q, baseIv, T);\n            quotes.push({\n                K,\n                T,\n                call: price,\n                iv: baseIv\n            });\n        }\n    }\n    return {\n        spot: f0,\n        quotes\n    };\n}\nasync function GET(req) {\n    const encoder = new TextEncoder();\n    const history = []; // rolling short history\n    const greekGrid = [];\n    const stream = new ReadableStream({\n        start (controller) {\n            let symbol = \"SPY\";\n            const r = 0.02, q = 0.00;\n            const tick = async ()=>{\n                const { spot: f0, quotes } = await getMarket(symbol);\n                // fill IVs if missing\n                for (const qte of quotes){\n                    if (qte.iv == null) {\n                        qte.iv = (0,_lib_math_blackscholes__WEBPACK_IMPORTED_MODULE_0__.impliedVol)(\"C\", f0, qte.K, r, q, qte.T, qte.call);\n                    }\n                }\n                // SVI fit per tenor -> IV grid for heatmap\n                const byT = {};\n                quotes.forEach((q)=>{\n                    (byT[q.T] ??= []).push(q);\n                });\n                const fits = {};\n                for (const T of Object.keys(byT).map(Number)){\n                    const row = byT[T];\n                    const ks = row.map((q)=>Math.log(q.K / f0));\n                    const w = row.map((q)=>(q.iv ?? 0.2) ** 2 * T);\n                    fits[T] = (0,_lib_ivs_svi__WEBPACK_IMPORTED_MODULE_2__.fitSVI)(ks, w);\n                }\n                const strikes = Array.from(new Set(quotes.map((q)=>q.K))).sort((a, b)=>a - b);\n                const tenors = Array.from(new Set(quotes.map((q)=>q.T))).sort((a, b)=>a - b);\n                const ivGrid = (0,_lib_ivs_svi__WEBPACK_IMPORTED_MODULE_2__.surfaceGridFromSVI)(strikes, tenors, f0, r, q, fits);\n                // Arbitrage checks\n                const arb = [\n                    ...(0,_lib_arbitrage_checks__WEBPACK_IMPORTED_MODULE_1__.butterflyCheck)(quotes.map(({ K, call, T })=>({\n                            K,\n                            call,\n                            T\n                        }))),\n                    ...(0,_lib_arbitrage_checks__WEBPACK_IMPORTED_MODULE_1__.calendarCheck)(quotes.map(({ K, call, T })=>({\n                            K,\n                            call,\n                            T\n                        })))\n                ];\n                // Greeks grid at current IVs (approx)\n                greekGrid.length = 0;\n                for (const T of tenors){\n                    for (const K of strikes){\n                        const row = quotes.find((q)=>q.T === T && q.K === K);\n                        const iv = row?.iv ?? 0.2;\n                        const g = (0,_lib_math_blackscholes__WEBPACK_IMPORTED_MODULE_0__.greeks)(\"C\", f0, K, r, q, iv, T);\n                        greekGrid.push({\n                            k: K,\n                            t: Math.round(T * 365),\n                            delta: g.delta,\n                            gamma: g.gamma,\n                            vega: g.vega\n                        });\n                    }\n                }\n                // ATM IV history + forecast\n                const atm = quotes.filter((q)=>Math.abs(q.K - f0) === Math.min(...quotes.map((x)=>Math.abs(x.K - f0)))).sort((a, b)=>a.T - b.T).map((q)=>q.iv ?? 0.2);\n                const atmCurrent = atm[0] ?? 0.2;\n                history.unshift({\n                    ts: Date.now(),\n                    atmIv: atmCurrent\n                });\n                if (history.length > 240) history.pop();\n                const forecast = (0,_lib_forecast_expSmooth__WEBPACK_IMPORTED_MODULE_3__.expSmoothForecast)(history.map((h)=>h.atmIv), 0.35, 8);\n                const payload = {\n                    ts: Date.now(),\n                    symbol,\n                    underlier: {\n                        price: f0\n                    },\n                    ivGrid,\n                    arb,\n                    forecast,\n                    history: history.slice(0, 120),\n                    greeks: greekGrid\n                };\n                controller.enqueue(encoder.encode(`data: ${JSON.stringify(payload)}\\n\\n`));\n            };\n            const id = setInterval(()=>{\n                tick().catch(()=>{});\n            }, 1500);\n            tick().catch(()=>{});\n            const abort = ()=>{\n                clearInterval(id);\n                try {\n                    controller.close();\n                } catch  {}\n            };\n            // @ts-ignore\n            req.signal?.addEventListener(\"abort\", abort);\n        },\n        cancel () {}\n    });\n    return new Response(stream, {\n        headers: {\n            \"Content-Type\": \"text/event-stream\",\n            \"Cache-Control\": \"no-cache, no-transform\",\n            \"Connection\": \"keep-alive\"\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUcsS0FBS3VCLFFBQVEyQyxHQUFHO2dCQUNyQyxNQUFNQyxXQUFXcEYsMEVBQWlCQSxDQUFDd0MsUUFBUWEsR0FBRyxDQUFDZ0MsQ0FBQUEsSUFBR0EsRUFBRUgsS0FBSyxHQUFHLE1BQU07Z0JBRWxFLE1BQU1JLFVBQVU7b0JBQ2RQLElBQUlDLEtBQUtDLEdBQUc7b0JBQ1pyRTtvQkFDQTJFLFdBQVc7d0JBQUV4RCxPQUFPYjtvQkFBRztvQkFDdkI2QztvQkFDQUM7b0JBQ0FvQjtvQkFDQTVDLFNBQVNBLFFBQVFnRCxLQUFLLENBQUMsR0FBRTtvQkFDekI5RixRQUFRK0M7Z0JBQ1Y7Z0JBQ0FJLFdBQVc0QyxPQUFPLENBQUNuRCxRQUFRb0QsTUFBTSxDQUFDLENBQUMsTUFBTSxFQUFFQyxLQUFLQyxTQUFTLENBQUNOLFNBQVMsSUFBSSxDQUFDO1lBQzFFO1lBRUEsTUFBTU8sS0FBS0MsWUFBWTtnQkFBUWhELE9BQU9pRCxLQUFLLENBQUMsS0FBSztZQUFJLEdBQUc7WUFDeERqRCxPQUFPaUQsS0FBSyxDQUFDLEtBQUs7WUFFbEIsTUFBTUMsUUFBUTtnQkFBUUMsY0FBY0o7Z0JBQUssSUFBSTtvQkFBRWhELFdBQVdxRCxLQUFLO2dCQUFJLEVBQUUsT0FBTSxDQUFDO1lBQUU7WUFDOUUsYUFBYTtZQUNiN0QsSUFBSThELE1BQU0sRUFBRUMsaUJBQWlCLFNBQVNKO1FBQ3hDO1FBQ0FLLFdBQXFCO0lBQ3ZCO0lBRUEsT0FBTyxJQUFJQyxTQUFTNUQsUUFBUTtRQUMxQjZELFNBQVM7WUFDUCxnQkFBZ0I7WUFDaEIsaUJBQWlCO1lBQ2pCLGNBQWM7UUFDaEI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdm9sYXRpeC8uL3NyYy9hcHAvYXBpL3N0cmVhbS9yb3V0ZS50cz82ZGM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgYnNQcmljZSwgZ3JlZWtzLCBpbXBsaWVkVm9sIH0gZnJvbSAnQC9saWIvbWF0aC9ibGFja3NjaG9sZXMnO1xuaW1wb3J0IHsgYnV0dGVyZmx5Q2hlY2ssIGNhbGVuZGFyQ2hlY2sgfSBmcm9tICdAL2xpYi9hcmJpdHJhZ2UvY2hlY2tzJztcbmltcG9ydCB7IGZpdFNWSSwgc3VyZmFjZUdyaWRGcm9tU1ZJIH0gZnJvbSAnQC9saWIvaXZzL3N2aSc7XG5pbXBvcnQgeyBleHBTbW9vdGhGb3JlY2FzdCB9IGZyb20gJ0AvbGliL2ZvcmVjYXN0L2V4cFNtb290aCc7XG5pbXBvcnQgeyBmZXRjaE9wdGlvbkNoYWluUG9seWdvbiB9IGZyb20gJ0AvbGliL2RhdGEvcHJvdmlkZXJzL3BvbHlnb24nO1xuXG5leHBvcnQgY29uc3QgcnVudGltZSA9ICdub2RlanMnO1xuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYyc7XG5leHBvcnQgY29uc3QgcmV2YWxpZGF0ZSA9IDA7XG5leHBvcnQgY29uc3QgZmV0Y2hDYWNoZSA9ICdmb3JjZS1uby1zdG9yZSc7XG5cbnR5cGUgUXVvdGUgPSB7IEs6bnVtYmVyOyBUOm51bWJlcjsgY2FsbDpudW1iZXI7IGl2PzpudW1iZXIgfTtcblxuZnVuY3Rpb24gcmFuZG9tV2FsayhweDpudW1iZXIpeyByZXR1cm4gcHggKiBNYXRoLmV4cCgoTWF0aC5yYW5kb20oKS0wLjUpKjAuMDAyKTsgfVxuXG5hc3luYyBmdW5jdGlvbiBnZXRNYXJrZXQoc3ltYm9sOnN0cmluZykge1xuICAvLyBUcnkgbGl2ZSBQb2x5Z29uLCBmYWxsYmFjayB0byBzeW50aGV0aWNcbiAgdHJ5IHtcbiAgICBjb25zdCBsaXZlID0gYXdhaXQgZmV0Y2hPcHRpb25DaGFpblBvbHlnb24oc3ltYm9sKTtcbiAgICBpZiAobGl2ZSAmJiBBcnJheS5pc0FycmF5KGxpdmUucXVvdGVzKSAmJiBsaXZlLnF1b3Rlcy5sZW5ndGgpIHJldHVybiBsaXZlO1xuICB9IGNhdGNoIHt9XG4gIC8vIHN5bnRoZXRpY1xuICBsZXQgZjAgPSA1MDA7XG4gIGNvbnN0IHN0cmlrZXMgPSBBcnJheS5mcm9tKHtsZW5ndGg6MTN9LChfLGkpPT4gTWF0aC5yb3VuZCg0MDAgKyBpKjIwKSk7XG4gIGNvbnN0IHRlbm9ycyA9IFs1LzM2NSwgMTUvMzY1LCAzMC8zNjUsIDYwLzM2NSwgOTAvMzY1XTtcbiAgY29uc3Qgcj0wLjAyLCBxPTAuMDA7XG4gIGNvbnN0IHF1b3RlczogUXVvdGVbXSA9IFtdO1xuICBmMCA9IHJhbmRvbVdhbGsoZjApO1xuICBmb3IgKGNvbnN0IFQgb2YgdGVub3JzKXtcbiAgICBmb3IgKGNvbnN0IEsgb2Ygc3RyaWtlcyl7XG4gICAgICBjb25zdCBiYXNlSXYgPSAwLjIwICsgMC4wOCpNYXRoLm1heCgwLChLLWYwKS9mMCkgKyAwLjAyKihNYXRoLnJhbmRvbSgpLTAuNSk7XG4gICAgICBjb25zdCBwcmljZSA9IGJzUHJpY2UoJ0MnLCBmMCwgSywgciwgcSwgYmFzZUl2LCBUKTtcbiAgICAgIHF1b3Rlcy5wdXNoKHsgSywgVCwgY2FsbDogcHJpY2UsIGl2OiBiYXNlSXYgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB7IHNwb3Q6IGYwLCBxdW90ZXMgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbiAgY29uc3QgaGlzdG9yeTogeyB0czpudW1iZXI7IGF0bUl2Om51bWJlciB9W10gPSBbXTsgICAvLyByb2xsaW5nIHNob3J0IGhpc3RvcnlcbiAgY29uc3QgZ3JlZWtHcmlkOiB7IGs6bnVtYmVyOyB0Om51bWJlcjsgZGVsdGE6bnVtYmVyOyBnYW1tYTpudW1iZXI7IHZlZ2E6bnVtYmVyIH1bXSA9IFtdO1xuXG4gIGNvbnN0IHN0cmVhbSA9IG5ldyBSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5Pih7XG4gICAgc3RhcnQoY29udHJvbGxlcil7XG4gICAgICBsZXQgc3ltYm9sID0gJ1NQWSc7XG4gICAgICBjb25zdCByPTAuMDIsIHE9MC4wMDtcblxuICAgICAgY29uc3QgdGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgeyBzcG90OiBmMCwgcXVvdGVzIH0gPSBhd2FpdCBnZXRNYXJrZXQoc3ltYm9sKTtcblxuICAgICAgICAvLyBmaWxsIElWcyBpZiBtaXNzaW5nXG4gICAgICAgIGZvciAoY29uc3QgcXRlIG9mIHF1b3Rlcykge1xuICAgICAgICAgIGlmIChxdGUuaXYgPT0gbnVsbCkge1xuICAgICAgICAgICAgcXRlLml2ID0gaW1wbGllZFZvbCgnQycsIGYwLCBxdGUuSywgciwgcSwgcXRlLlQsIHF0ZS5jYWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTVkkgZml0IHBlciB0ZW5vciAtPiBJViBncmlkIGZvciBoZWF0bWFwXG4gICAgICAgIGNvbnN0IGJ5VDogUmVjb3JkPG51bWJlciwgUXVvdGVbXT4gPSB7fTtcbiAgICAgICAgcXVvdGVzLmZvckVhY2gocT0+eyAoYnlUW3EuVF0gPz89IFtdKS5wdXNoKHEpOyB9KTtcbiAgICAgICAgY29uc3QgZml0czogUmVjb3JkPG51bWJlciwgUmV0dXJuVHlwZTx0eXBlb2YgZml0U1ZJPj4gPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBUIG9mIE9iamVjdC5rZXlzKGJ5VCkubWFwKE51bWJlcikpe1xuICAgICAgICAgIGNvbnN0IHJvdyA9IGJ5VFtUXTtcbiAgICAgICAgICBjb25zdCBrcyA9IHJvdy5tYXAocSA9PiBNYXRoLmxvZyhxLksgLyBmMCkpO1xuICAgICAgICAgIGNvbnN0IHcgPSByb3cubWFwKHEgPT4gKHEuaXYgPz8gMC4yKSoqMiAqIFQpO1xuICAgICAgICAgIGZpdHNbVF0gPSBmaXRTVkkoa3MsIHcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0cmlrZXMgPSBBcnJheS5mcm9tKG5ldyBTZXQocXVvdGVzLm1hcChxPT5xLkspKSkuc29ydCgoYSxiKT0+YS1iKTtcbiAgICAgICAgY29uc3QgdGVub3JzICA9IEFycmF5LmZyb20obmV3IFNldChxdW90ZXMubWFwKHE9PnEuVCkpKS5zb3J0KChhLGIpPT5hLWIpO1xuICAgICAgICBjb25zdCBpdkdyaWQgPSBzdXJmYWNlR3JpZEZyb21TVkkoc3RyaWtlcywgdGVub3JzLCBmMCwgciwgcSwgZml0cyk7XG5cbiAgICAgICAgLy8gQXJiaXRyYWdlIGNoZWNrc1xuICAgICAgICBjb25zdCBhcmIgPSBbXG4gICAgICAgICAgLi4uYnV0dGVyZmx5Q2hlY2socXVvdGVzLm1hcCgoe0ssY2FsbCxUfSk9Pih7SyxjYWxsLFR9KSkpLFxuICAgICAgICAgIC4uLmNhbGVuZGFyQ2hlY2socXVvdGVzLm1hcCgoe0ssY2FsbCxUfSk9Pih7SyxjYWxsLFR9KSkpXG4gICAgICAgIF07XG5cbiAgICAgICAgLy8gR3JlZWtzIGdyaWQgYXQgY3VycmVudCBJVnMgKGFwcHJveClcbiAgICAgICAgZ3JlZWtHcmlkLmxlbmd0aCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgVCBvZiB0ZW5vcnMpe1xuICAgICAgICAgIGZvciAoY29uc3QgSyBvZiBzdHJpa2VzKXtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHF1b3Rlcy5maW5kKHE9PnEuVD09PVQgJiYgcS5LPT09Syk7XG4gICAgICAgICAgICBjb25zdCBpdiA9IHJvdz8uaXYgPz8gMC4yO1xuICAgICAgICAgICAgY29uc3QgZyA9IGdyZWVrcygnQycsIGYwLCBLLCByLCBxLCBpdiwgVCk7XG4gICAgICAgICAgICBncmVla0dyaWQucHVzaCh7IGs6SywgdDpNYXRoLnJvdW5kKFQqMzY1KSwgZGVsdGE6Zy5kZWx0YSwgZ2FtbWE6Zy5nYW1tYSwgdmVnYTpnLnZlZ2EgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQVRNIElWIGhpc3RvcnkgKyBmb3JlY2FzdFxuICAgICAgICBjb25zdCBhdG0gPSBxdW90ZXNcbiAgICAgICAgICAuZmlsdGVyKHE9Pk1hdGguYWJzKHEuSy1mMCk9PT1NYXRoLm1pbiguLi5xdW90ZXMubWFwKHg9Pk1hdGguYWJzKHguSy1mMCkpKSlcbiAgICAgICAgICAuc29ydCgoYSxiKT0+YS5ULWIuVClcbiAgICAgICAgICAubWFwKHE9PnEuaXYgPz8gMC4yKTtcbiAgICAgICAgY29uc3QgYXRtQ3VycmVudCA9IGF0bVswXSA/PyAwLjI7XG4gICAgICAgIGhpc3RvcnkudW5zaGlmdCh7IHRzOiBEYXRlLm5vdygpLCBhdG1JdjogYXRtQ3VycmVudCB9KTtcbiAgICAgICAgaWYgKGhpc3RvcnkubGVuZ3RoID4gMjQwKSBoaXN0b3J5LnBvcCgpO1xuICAgICAgICBjb25zdCBmb3JlY2FzdCA9IGV4cFNtb290aEZvcmVjYXN0KGhpc3RvcnkubWFwKGg9PmguYXRtSXYpLCAwLjM1LCA4KTtcblxuICAgICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICAgIHRzOiBEYXRlLm5vdygpLFxuICAgICAgICAgIHN5bWJvbCxcbiAgICAgICAgICB1bmRlcmxpZXI6IHsgcHJpY2U6IGYwIH0sXG4gICAgICAgICAgaXZHcmlkLFxuICAgICAgICAgIGFyYixcbiAgICAgICAgICBmb3JlY2FzdCxcbiAgICAgICAgICBoaXN0b3J5OiBoaXN0b3J5LnNsaWNlKDAsMTIwKSwgLy8gc2VuZCBsYXN0IE5cbiAgICAgICAgICBncmVla3M6IGdyZWVrR3JpZFxuICAgICAgICB9O1xuICAgICAgICBjb250cm9sbGVyLmVucXVldWUoZW5jb2Rlci5lbmNvZGUoYGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkocGF5bG9hZCl9XFxuXFxuYCkpO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgaWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7IHRpY2soKS5jYXRjaCgoKT0+e30pOyB9LCAxNTAwKTtcbiAgICAgIHRpY2soKS5jYXRjaCgoKT0+e30pO1xuXG4gICAgICBjb25zdCBhYm9ydCA9ICgpID0+IHsgY2xlYXJJbnRlcnZhbChpZCk7IHRyeSB7IGNvbnRyb2xsZXIuY2xvc2UoKTsgfSBjYXRjaCB7fSB9O1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgcmVxLnNpZ25hbD8uYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydCk7XG4gICAgfSxcbiAgICBjYW5jZWwoKXsgLyogbm9vcCAqLyB9XG4gIH0pO1xuXG4gIHJldHVybiBuZXcgUmVzcG9uc2Uoc3RyZWFtLCB7XG4gICAgaGVhZGVyczoge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L2V2ZW50LXN0cmVhbScsXG4gICAgICAnQ2FjaGUtQ29udHJvbCc6ICduby1jYWNoZSwgbm8tdHJhbnNmb3JtJyxcbiAgICAgICdDb25uZWN0aW9uJzogJ2tlZXAtYWxpdmUnXG4gICAgfVxuICB9KTtcbn0iXSwibmFtZXMiOlsiYnNQcmljZSIsImdyZWVrcyIsImltcGxpZWRWb2wiLCJidXR0ZXJmbHlDaGVjayIsImNhbGVuZGFyQ2hlY2siLCJmaXRTVkkiLCJzdXJmYWNlR3JpZEZyb21TVkkiLCJleHBTbW9vdGhGb3JlY2FzdCIsImZldGNoT3B0aW9uQ2hhaW5Qb2x5Z29uIiwicnVudGltZSIsImR5bmFtaWMiLCJyZXZhbGlkYXRlIiwiZmV0Y2hDYWNoZSIsInJhbmRvbVdhbGsiLCJweCIsIk1hdGgiLCJleHAiLCJyYW5kb20iLCJnZXRNYXJrZXQiLCJzeW1ib2wiLCJsaXZlIiwiQXJyYXkiLCJpc0FycmF5IiwicXVvdGVzIiwibGVuZ3RoIiwiZjAiLCJzdHJpa2VzIiwiZnJvbSIsIl8iLCJpIiwicm91bmQiLCJ0ZW5vcnMiLCJyIiwicSIsIlQiLCJLIiwiYmFzZUl2IiwibWF4IiwicHJpY2UiLCJwdXNoIiwiY2FsbCIsIml2Iiwic3BvdCIsIkdFVCIsInJlcSIsImVuY29kZXIiLCJUZXh0RW5jb2RlciIsImhpc3RvcnkiLCJncmVla0dyaWQiLCJzdHJlYW0iLCJSZWFkYWJsZVN0cmVhbSIsInN0YXJ0IiwiY29udHJvbGxlciIsInRpY2siLCJxdGUiLCJieVQiLCJmb3JFYWNoIiwiZml0cyIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJOdW1iZXIiLCJyb3ciLCJrcyIsImxvZyIsInciLCJTZXQiLCJzb3J0IiwiYSIsImIiLCJpdkdyaWQiLCJhcmIiLCJmaW5kIiwiZyIsImsiLCJ0IiwiZGVsdGEiLCJnYW1tYSIsInZlZ2EiLCJhdG0iLCJmaWx0ZXIiLCJhYnMiLCJtaW4iLCJ4IiwiYXRtQ3VycmVudCIsInVuc2hpZnQiLCJ0cyIsIkRhdGUiLCJub3ciLCJhdG1JdiIsInBvcCIsImZvcmVjYXN0IiwiaCIsInBheWxvYWQiLCJ1bmRlcmxpZXIiLCJzbGljZSIsImVucXVldWUiLCJlbmNvZGUiLCJKU09OIiwic3RyaW5naWZ5IiwiaWQiLCJzZXRJbnRlcnZhbCIsImNhdGNoIiwiYWJvcnQiLCJjbGVhckludGVydmFsIiwiY2xvc2UiLCJzaWduYWwiLCJhZGRFdmVudExpc3RlbmVyIiwiY2FuY2VsIiwiUmVzcG9uc2UiLCJoZWFkZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/stream/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/arbitrage/checks.ts":
/*!*************************************!*\
  !*** ./src/lib/arbitrage/checks.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   butterflyCheck: () => (/* binding */ butterflyCheck),\n/* harmony export */   calendarCheck: () => (/* binding */ calendarCheck)\n/* harmony export */ });\nconst BUTTERFLY_TOL = 5e-4;\nconst CALENDAR_TOL = 1e-6;\nconst MIN_SPACING = 1e-6;\nconst SMOOTH_LAMBDA = 0.10;\nfunction butterflyCheck(quotes) {\n    const out = [];\n    const byT = {};\n    for (const q of quotes)(byT[q.T] ??= []).push(q);\n    for (const T of Object.keys(byT).map(Number)){\n        const arr = byT[T].slice().sort((a, b)=>a.K - b.K);\n        for(let i = 1; i < arr.length - 1; i++){\n            const K1 = arr[i - 1].K, K2 = arr[i].K, K3 = arr[i + 1].K;\n            const C1 = arr[i - 1].call, C2 = arr[i].call, C3 = arr[i + 1].call;\n            const h1 = K2 - K1, h2 = K3 - K2;\n            if (h1 < MIN_SPACING || h2 < MIN_SPACING) continue;\n            const C2s = (C1 + SMOOTH_LAMBDA * C2 + C3) / (2 + SMOOTH_LAMBDA);\n            const metric = h2 * (C2s - C1) - h1 * (C3 - C2s);\n            const flagged = metric > BUTTERFLY_TOL;\n            out.push({\n                type: \"butterfly\",\n                expiry: `T=${T.toFixed(3)}`,\n                strikes: [\n                    K1,\n                    K2,\n                    K3\n                ],\n                metric,\n                flagged,\n                detail: `Δ=${metric.toExponential(2)} @ [${K1}, ${K2}, ${K3}]`\n            });\n        }\n    }\n    return out;\n}\nfunction calendarCheck(quotes) {\n    const out = [];\n    const byK = {};\n    for (const q of quotes)(byK[q.K] ??= []).push(q);\n    for (const K of Object.keys(byK).map(Number)){\n        const arr = byK[K].slice().sort((a, b)=>a.T - b.T);\n        for(let i = 0; i < arr.length - 1; i++){\n            const shorter = arr[i], longer = arr[i + 1];\n            // Flag if longer expiry is *cheaper* by more than tol\n            const flagged = longer.call + CALENDAR_TOL < shorter.call;\n            const diff = shorter.call - longer.call;\n            out.push({\n                type: \"calendar\",\n                expiry: `${shorter.T.toFixed(3)}→${longer.T.toFixed(3)}`,\n                strikes: [\n                    K\n                ],\n                metric: diff,\n                flagged,\n                detail: `Δ=${diff.toExponential(2)} @ K=${K}`\n            });\n        }\n    }\n    return out;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFDekMsc0RBQXNEO1lBQ3RELE1BQU1hLFVBQVVVLE9BQU9qQixJQUFJLEdBQUcxQixlQUFlMEMsUUFBUWhCLElBQUk7WUFDekQsTUFBTWtCLE9BQU9GLFFBQVFoQixJQUFJLEdBQUdpQixPQUFPakIsSUFBSTtZQUN2Q3JCLElBQUlJLElBQUksQ0FBQztnQkFDUHlCLE1BQU07Z0JBQ05DLFFBQVEsQ0FBQyxFQUFFTyxRQUFRbEMsQ0FBQyxDQUFDNEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFTyxPQUFPbkMsQ0FBQyxDQUFDNEIsT0FBTyxDQUFDLEdBQUcsQ0FBQztnQkFDeERDLFNBQVM7b0JBQUNsQjtpQkFBRTtnQkFDWmEsUUFBUVk7Z0JBQ1JYO2dCQUNBSyxRQUFRLENBQUMsRUFBRSxFQUFFTSxLQUFLTCxhQUFhLENBQUMsR0FBRyxLQUFLLEVBQUVwQixFQUFFLENBQUM7WUFDL0M7UUFDRjtJQUNGO0lBQ0EsT0FBT2Q7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL3ZvbGF0aXgvLi9zcmMvbGliL2FyYml0cmFnZS9jaGVja3MudHM/ZjE0MyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdHlwZSBBcmJGbGFnID0ge1xuICB0eXBlOiBzdHJpbmc7XG4gIGV4cGlyeTogc3RyaW5nO1xuICBzdHJpa2VzOiBudW1iZXJbXTtcbiAgbWV0cmljOiBudW1iZXI7XG4gIGZsYWdnZWQ6IGJvb2xlYW47XG4gIGRldGFpbD86IHN0cmluZztcbn07XG5cbmNvbnN0IEJVVFRFUkZMWV9UT0wgPSA1ZS00O1xuY29uc3QgQ0FMRU5EQVJfVE9MICA9IDFlLTY7XG5jb25zdCBNSU5fU1BBQ0lORyAgID0gMWUtNjtcbmNvbnN0IFNNT09USF9MQU1CREEgPSAwLjEwO1xuXG5leHBvcnQgZnVuY3Rpb24gYnV0dGVyZmx5Q2hlY2socXVvdGVzOiB7SzpudW1iZXI7IGNhbGw6bnVtYmVyOyBUOm51bWJlcn1bXSk6IEFyYkZsYWdbXSB7XG4gIGNvbnN0IG91dDogQXJiRmxhZ1tdID0gW107XG4gIGNvbnN0IGJ5VDogUmVjb3JkPG51bWJlciwge0s6bnVtYmVyOyBjYWxsOm51bWJlcjsgVDpudW1iZXJ9W10+ID0ge307XG4gIGZvciAoY29uc3QgcSBvZiBxdW90ZXMpIChieVRbcS5UXSA/Pz0gW10pLnB1c2gocSk7XG5cbiAgZm9yIChjb25zdCBUIG9mIE9iamVjdC5rZXlzKGJ5VCkubWFwKE51bWJlcikpIHtcbiAgICBjb25zdCBhcnIgPSBieVRbVF0uc2xpY2UoKS5zb3J0KChhLGIpPT5hLkstYi5LKTtcbiAgICBmb3IgKGxldCBpPTE7IGk8YXJyLmxlbmd0aC0xOyBpKyspIHtcbiAgICAgIGNvbnN0IEsxPWFycltpLTFdLkssIEsyPWFycltpXS5LLCBLMz1hcnJbaSsxXS5LO1xuICAgICAgY29uc3QgQzE9YXJyW2ktMV0uY2FsbCwgQzI9YXJyW2ldLmNhbGwsIEMzPWFycltpKzFdLmNhbGw7XG4gICAgICBjb25zdCBoMT1LMi1LMSwgaDI9SzMtSzI7XG4gICAgICBpZiAoaDEgPCBNSU5fU1BBQ0lORyB8fCBoMiA8IE1JTl9TUEFDSU5HKSBjb250aW51ZTtcblxuICAgICAgY29uc3QgQzJzID0gKEMxICsgU01PT1RIX0xBTUJEQSpDMiArIEMzKSAvICgyICsgU01PT1RIX0xBTUJEQSk7XG4gICAgICBjb25zdCBtZXRyaWMgPSBoMiooQzJzIC0gQzEpIC0gaDEqKEMzIC0gQzJzKTtcbiAgICAgIGNvbnN0IGZsYWdnZWQgPSBtZXRyaWMgPiBCVVRURVJGTFlfVE9MO1xuXG4gICAgICBvdXQucHVzaCh7XG4gICAgICAgIHR5cGU6ICdidXR0ZXJmbHknLFxuICAgICAgICBleHBpcnk6IGBUPSR7VC50b0ZpeGVkKDMpfWAsXG4gICAgICAgIHN0cmlrZXM6IFtLMSxLMixLM10sXG4gICAgICAgIG1ldHJpYyxcbiAgICAgICAgZmxhZ2dlZCxcbiAgICAgICAgZGV0YWlsOiBgzpQ9JHttZXRyaWMudG9FeHBvbmVudGlhbCgyKX0gQCBbJHtLMX0sICR7SzJ9LCAke0szfV1gXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGVuZGFyQ2hlY2socXVvdGVzOiB7SzpudW1iZXI7IGNhbGw6bnVtYmVyOyBUOm51bWJlcn1bXSk6IEFyYkZsYWdbXSB7XG4gIGNvbnN0IG91dDogQXJiRmxhZ1tdID0gW107XG4gIGNvbnN0IGJ5SzogUmVjb3JkPG51bWJlciwge0s6bnVtYmVyOyBjYWxsOm51bWJlcjsgVDpudW1iZXJ9W10+ID0ge307XG4gIGZvciAoY29uc3QgcSBvZiBxdW90ZXMpIChieUtbcS5LXSA/Pz0gW10pLnB1c2gocSk7XG5cbiAgZm9yIChjb25zdCBLIG9mIE9iamVjdC5rZXlzKGJ5SykubWFwKE51bWJlcikpIHtcbiAgICBjb25zdCBhcnIgPSBieUtbS10uc2xpY2UoKS5zb3J0KChhLGIpPT5hLlQtYi5UKTtcbiAgICBmb3IgKGxldCBpPTA7IGk8YXJyLmxlbmd0aC0xOyBpKyspIHtcbiAgICAgIGNvbnN0IHNob3J0ZXIgPSBhcnJbaV0sIGxvbmdlciA9IGFycltpKzFdO1xuICAgICAgLy8gRmxhZyBpZiBsb25nZXIgZXhwaXJ5IGlzICpjaGVhcGVyKiBieSBtb3JlIHRoYW4gdG9sXG4gICAgICBjb25zdCBmbGFnZ2VkID0gbG9uZ2VyLmNhbGwgKyBDQUxFTkRBUl9UT0wgPCBzaG9ydGVyLmNhbGw7XG4gICAgICBjb25zdCBkaWZmID0gc2hvcnRlci5jYWxsIC0gbG9uZ2VyLmNhbGw7XG4gICAgICBvdXQucHVzaCh7XG4gICAgICAgIHR5cGU6ICdjYWxlbmRhcicsXG4gICAgICAgIGV4cGlyeTogYCR7c2hvcnRlci5ULnRvRml4ZWQoMyl94oaSJHtsb25nZXIuVC50b0ZpeGVkKDMpfWAsXG4gICAgICAgIHN0cmlrZXM6IFtLXSxcbiAgICAgICAgbWV0cmljOiBkaWZmLFxuICAgICAgICBmbGFnZ2VkLFxuICAgICAgICBkZXRhaWw6IGDOlD0ke2RpZmYudG9FeHBvbmVudGlhbCgyKX0gQCBLPSR7S31gXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dDtcbn0iXSwibmFtZXMiOlsiQlVUVEVSRkxZX1RPTCIsIkNBTEVOREFSX1RPTCIsIk1JTl9TUEFDSU5HIiwiU01PT1RIX0xBTUJEQSIsImJ1dHRlcmZseUNoZWNrIiwicXVvdGVzIiwib3V0IiwiYnlUIiwicSIsIlQiLCJwdXNoIiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsIk51bWJlciIsImFyciIsInNsaWNlIiwic29ydCIsImEiLCJiIiwiSyIsImkiLCJsZW5ndGgiLCJLMSIsIksyIiwiSzMiLCJDMSIsImNhbGwiLCJDMiIsIkMzIiwiaDEiLCJoMiIsIkMycyIsIm1ldHJpYyIsImZsYWdnZWQiLCJ0eXBlIiwiZXhwaXJ5IiwidG9GaXhlZCIsInN0cmlrZXMiLCJkZXRhaWwiLCJ0b0V4cG9uZW50aWFsIiwiY2FsZW5kYXJDaGVjayIsImJ5SyIsInNob3J0ZXIiLCJsb25nZXIiLCJkaWZmIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/arbitrage/checks.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/data/providers/polygon.ts":
/*!*******************************************!*\
  !*** ./src/lib/data/providers/polygon.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchOptionChainPolygon: () => (/* binding */ fetchOptionChainPolygon)\n/* harmony export */ });\n// src/lib/data/providers/polygon.ts\n// Minimal Polygon options snapshot fetcher with graceful fallbacks.\n// Requires: POLYGON_API_KEY in env. Returns a normalized quote row.\nconst POLY_BASE = \"https://api.polygon.io\";\nasync function json(url) {\n    const r = await fetch(url);\n    if (!r.ok) throw new Error(`${r.status} ${r.statusText}`);\n    return r.json();\n}\nasync function fetchOptionChainPolygon(symbol) {\n    const key = process.env.POLYGON_API_KEY;\n    if (!key) throw new Error(\"POLYGON_API_KEY missing\");\n    // 1) Get last trade for underlying\n    const u = await json(`${POLY_BASE}/v2/last/trade/${encodeURIComponent(symbol)}?apiKey=${key}`);\n    const spot = u?.results?.p ?? u?.results?.price ?? 0;\n    // 2) Get expiries (normalize to string[])\n    const cals = await json(`${POLY_BASE}/v3/reference/options/contracts?underlying_ticker=${encodeURIComponent(symbol)}&limit=200&apiKey=${key}`);\n    const expiries = Array.from(new Set((cals?.results ?? []).map((c)=>c?.expiration_date ? String(c.expiration_date) : \"\").filter((s)=>s.length > 0))).sort().slice(0, 5);\n    // 3) For each expiry, pull a handful of strikes around spot using current quotes\n    const out = [];\n    for (const exp of expiries){\n        const res = await json(`${POLY_BASE}/v3/snapshot/options/${encodeURIComponent(symbol)}?expiration_date=${encodeURIComponent(exp)}&contract_type=call&limit=250&apiKey=${key}`);\n        const rows = res?.results ?? [];\n        if (!rows.length) continue;\n        // sort by strike\n        rows.sort((a, b)=>a.details.strike_price - b.details.strike_price);\n        // pick ~13 strikes around spot\n        const nearestIndex = rows.reduce((best, r, i)=>{\n            const d = Math.abs(r.details.strike_price - spot);\n            return d < best.d ? {\n                i,\n                d\n            } : best;\n        }, {\n            i: 0,\n            d: Number.POSITIVE_INFINITY\n        }).i ?? 0;\n        const start = Math.max(0, nearestIndex - 6);\n        const slice = rows.slice(start, start + 13);\n        // T (years, ACT/365)\n        const ms = +new Date(exp) - Date.now();\n        const days = Math.max(1, Math.round(ms / 86400000));\n        const T = days / 365;\n        for (const r of slice){\n            const K = r.details.strike_price;\n            const bid = r.day?.bid ?? r.last_quote?.bid ?? 0;\n            const ask = r.day?.ask ?? r.last_quote?.ask ?? 0;\n            const last = r.last_trade?.price ?? 0;\n            const mid = bid > 0 && ask > 0 ? 0.5 * (bid + ask) : last;\n            if (mid > 0 && Number.isFinite(K) && Number.isFinite(T)) {\n                out.push({\n                    K,\n                    T,\n                    call: mid\n                });\n            }\n        }\n    }\n    return {\n        spot,\n        quotes: out\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RhdGEvcHJvdmlkZXJzL3BvbHlnb24udHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLG9DQUFvQztBQUNwQyxvRUFBb0U7QUFDcEUsb0VBQW9FO0FBSXBFLE1BQU1BLFlBQVk7QUFFbEIsZUFBZUMsS0FBY0MsR0FBVztJQUN0QyxNQUFNQyxJQUFJLE1BQU1DLE1BQU1GO0lBQ3RCLElBQUksQ0FBQ0MsRUFBRUUsRUFBRSxFQUFFLE1BQU0sSUFBSUMsTUFBTSxDQUFDLEVBQUVILEVBQUVJLE1BQU0sQ0FBQyxDQUFDLEVBQUVKLEVBQUVLLFVBQVUsQ0FBQyxDQUFDO0lBQ3hELE9BQU9MLEVBQUVGLElBQUk7QUFDZjtBQWFPLGVBQWVRLHdCQUNwQkMsTUFBYztJQUVkLE1BQU1DLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtJQUN2QyxJQUFJLENBQUNILEtBQUssTUFBTSxJQUFJTCxNQUFNO0lBRTFCLG1DQUFtQztJQUNuQyxNQUFNUyxJQUFJLE1BQU1kLEtBQ2QsQ0FBQyxFQUFFRCxVQUFVLGVBQWUsRUFBRWdCLG1CQUFtQk4sUUFBUSxRQUFRLEVBQUVDLElBQUksQ0FBQztJQUUxRSxNQUFNTSxPQUFRRixHQUFHRyxTQUFTQyxLQUFLSixHQUFHRyxTQUFTRSxTQUFTO0lBRXBELDBDQUEwQztJQUMxQyxNQUFNQyxPQUFPLE1BQU1wQixLQUNqQixDQUFDLEVBQUVELFVBQVUsa0RBQWtELEVBQUVnQixtQkFDL0ROLFFBQ0Esa0JBQWtCLEVBQUVDLElBQUksQ0FBQztJQUU3QixNQUFNVyxXQUFxQkMsTUFBTUMsSUFBSSxDQUNuQyxJQUFJQyxJQUNGLENBQUNKLE1BQU1ILFdBQVcsRUFBRSxFQUNqQlEsR0FBRyxDQUFDLENBQUNDLElBQU9BLEdBQUdDLGtCQUFrQkMsT0FBT0YsRUFBRUMsZUFBZSxJQUFJLElBQzdERSxNQUFNLENBQUMsQ0FBQ0MsSUFBbUJBLEVBQUVDLE1BQU0sR0FBRyxLQUcxQ0MsSUFBSSxHQUNKQyxLQUFLLENBQUMsR0FBRztJQUVaLGlGQUFpRjtJQUNqRixNQUFNQyxNQUFrQixFQUFFO0lBRTFCLEtBQUssTUFBTUMsT0FBT2QsU0FBVTtRQUMxQixNQUFNZSxNQUFNLE1BQU1wQyxLQUNoQixDQUFDLEVBQUVELFVBQVUscUJBQXFCLEVBQUVnQixtQkFDbENOLFFBQ0EsaUJBQWlCLEVBQUVNLG1CQUFtQm9CLEtBQUsscUNBQXFDLEVBQUV6QixJQUFJLENBQUM7UUFFM0YsTUFBTTJCLE9BQVFELEtBQUtuQixXQUFXLEVBQUU7UUFDaEMsSUFBSSxDQUFDb0IsS0FBS04sTUFBTSxFQUFFO1FBRWxCLGlCQUFpQjtRQUNqQk0sS0FBS0wsSUFBSSxDQUFDLENBQUNNLEdBQUdDLElBQU1ELEVBQUVFLE9BQU8sQ0FBQ0MsWUFBWSxHQUFHRixFQUFFQyxPQUFPLENBQUNDLFlBQVk7UUFFbkUsK0JBQStCO1FBQy9CLE1BQU1DLGVBQ0pMLEtBQUtNLE1BQU0sQ0FDVCxDQUFDQyxNQUFNMUMsR0FBRzJDO1lBQ1IsTUFBTUMsSUFBSUMsS0FBS0MsR0FBRyxDQUFDOUMsRUFBRXNDLE9BQU8sQ0FBQ0MsWUFBWSxHQUFHekI7WUFDNUMsT0FBTzhCLElBQUlGLEtBQUtFLENBQUMsR0FBRztnQkFBRUQ7Z0JBQUdDO1lBQUUsSUFBSUY7UUFDakMsR0FDQTtZQUFFQyxHQUFHO1lBQUdDLEdBQUdHLE9BQU9DLGlCQUFpQjtRQUFDLEdBQ3BDTCxDQUFDLElBQUk7UUFFVCxNQUFNTSxRQUFRSixLQUFLSyxHQUFHLENBQUMsR0FBR1YsZUFBZTtRQUN6QyxNQUFNVCxRQUFRSSxLQUFLSixLQUFLLENBQUNrQixPQUFPQSxRQUFRO1FBRXhDLHFCQUFxQjtRQUNyQixNQUFNRSxLQUFLLENBQUMsSUFBSUMsS0FBS25CLE9BQU9tQixLQUFLQyxHQUFHO1FBQ3BDLE1BQU1DLE9BQU9ULEtBQUtLLEdBQUcsQ0FBQyxHQUFHTCxLQUFLVSxLQUFLLENBQUNKLEtBQUs7UUFDekMsTUFBTUssSUFBSUYsT0FBTztRQUVqQixLQUFLLE1BQU10RCxLQUFLK0IsTUFBTztZQUNyQixNQUFNMEIsSUFBSXpELEVBQUVzQyxPQUFPLENBQUNDLFlBQVk7WUFDaEMsTUFBTW1CLE1BQU0xRCxFQUFFMkQsR0FBRyxFQUFFRCxPQUFPMUQsRUFBRTRELFVBQVUsRUFBRUYsT0FBTztZQUMvQyxNQUFNRyxNQUFNN0QsRUFBRTJELEdBQUcsRUFBRUUsT0FBTzdELEVBQUU0RCxVQUFVLEVBQUVDLE9BQU87WUFDL0MsTUFBTUMsT0FBTzlELEVBQUUrRCxVQUFVLEVBQUU5QyxTQUFTO1lBQ3BDLE1BQU0rQyxNQUFNTixNQUFNLEtBQUtHLE1BQU0sSUFBSSxNQUFPSCxDQUFBQSxNQUFNRyxHQUFFLElBQUtDO1lBQ3JELElBQUlFLE1BQU0sS0FBS2pCLE9BQU9rQixRQUFRLENBQUNSLE1BQU1WLE9BQU9rQixRQUFRLENBQUNULElBQUk7Z0JBQ3ZEeEIsSUFBSWtDLElBQUksQ0FBQztvQkFBRVQ7b0JBQUdEO29CQUFHVyxNQUFNSDtnQkFBSTtZQUM3QjtRQUNGO0lBQ0Y7SUFFQSxPQUFPO1FBQUVsRDtRQUFNc0QsUUFBUXBDO0lBQUk7QUFDN0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b2xhdGl4Ly4vc3JjL2xpYi9kYXRhL3Byb3ZpZGVycy9wb2x5Z29uLnRzPzBlN2EiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9kYXRhL3Byb3ZpZGVycy9wb2x5Z29uLnRzXG4vLyBNaW5pbWFsIFBvbHlnb24gb3B0aW9ucyBzbmFwc2hvdCBmZXRjaGVyIHdpdGggZ3JhY2VmdWwgZmFsbGJhY2tzLlxuLy8gUmVxdWlyZXM6IFBPTFlHT05fQVBJX0tFWSBpbiBlbnYuIFJldHVybnMgYSBub3JtYWxpemVkIHF1b3RlIHJvdy5cblxuZXhwb3J0IHR5cGUgUXVvdGVSb3cgPSB7IEs6IG51bWJlcjsgVDogbnVtYmVyOyBjYWxsOiBudW1iZXI7IGl2PzogbnVtYmVyIH07XG5cbmNvbnN0IFBPTFlfQkFTRSA9ICdodHRwczovL2FwaS5wb2x5Z29uLmlvJztcblxuYXN5bmMgZnVuY3Rpb24ganNvbjxUID0gYW55Pih1cmw6IHN0cmluZyk6IFByb21pc2U8VD4ge1xuICBjb25zdCByID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgaWYgKCFyLm9rKSB0aHJvdyBuZXcgRXJyb3IoYCR7ci5zdGF0dXN9ICR7ci5zdGF0dXNUZXh0fWApO1xuICByZXR1cm4gci5qc29uKCkgYXMgUHJvbWlzZTxUPjtcbn1cblxudHlwZSBMYXN0VHJhZGVSZXNwID0geyByZXN1bHRzPzogeyBwPzogbnVtYmVyOyBwcmljZT86IG51bWJlciB9IH07XG50eXBlIENvbnRyYWN0c1Jlc3AgPSB7IHJlc3VsdHM/OiBBcnJheTx7IGV4cGlyYXRpb25fZGF0ZT86IHN0cmluZyB9PiB9O1xudHlwZSBTbmFwc2hvdFJlc3AgPSB7XG4gIHJlc3VsdHM/OiBBcnJheTx7XG4gICAgZGV0YWlsczogeyBzdHJpa2VfcHJpY2U6IG51bWJlciB9O1xuICAgIGxhc3RfdHJhZGU/OiB7IHByaWNlPzogbnVtYmVyIH07XG4gICAgbGFzdF9xdW90ZT86IHsgYmlkPzogbnVtYmVyOyBhc2s/OiBudW1iZXIgfTtcbiAgICBkYXk/OiB7IGJpZD86IG51bWJlcjsgYXNrPzogbnVtYmVyIH07XG4gIH0+O1xufTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoT3B0aW9uQ2hhaW5Qb2x5Z29uKFxuICBzeW1ib2w6IHN0cmluZ1xuKTogUHJvbWlzZTx7IHNwb3Q6IG51bWJlcjsgcXVvdGVzOiBRdW90ZVJvd1tdIH0+IHtcbiAgY29uc3Qga2V5ID0gcHJvY2Vzcy5lbnYuUE9MWUdPTl9BUElfS0VZO1xuICBpZiAoIWtleSkgdGhyb3cgbmV3IEVycm9yKCdQT0xZR09OX0FQSV9LRVkgbWlzc2luZycpO1xuXG4gIC8vIDEpIEdldCBsYXN0IHRyYWRlIGZvciB1bmRlcmx5aW5nXG4gIGNvbnN0IHUgPSBhd2FpdCBqc29uPExhc3RUcmFkZVJlc3A+KFxuICAgIGAke1BPTFlfQkFTRX0vdjIvbGFzdC90cmFkZS8ke2VuY29kZVVSSUNvbXBvbmVudChzeW1ib2wpfT9hcGlLZXk9JHtrZXl9YFxuICApO1xuICBjb25zdCBzcG90ID0gKHU/LnJlc3VsdHM/LnAgPz8gdT8ucmVzdWx0cz8ucHJpY2UgPz8gMCkgYXMgbnVtYmVyO1xuXG4gIC8vIDIpIEdldCBleHBpcmllcyAobm9ybWFsaXplIHRvIHN0cmluZ1tdKVxuICBjb25zdCBjYWxzID0gYXdhaXQganNvbjxDb250cmFjdHNSZXNwPihcbiAgICBgJHtQT0xZX0JBU0V9L3YzL3JlZmVyZW5jZS9vcHRpb25zL2NvbnRyYWN0cz91bmRlcmx5aW5nX3RpY2tlcj0ke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgIHN5bWJvbFxuICAgICl9JmxpbWl0PTIwMCZhcGlLZXk9JHtrZXl9YFxuICApO1xuICBjb25zdCBleHBpcmllczogc3RyaW5nW10gPSBBcnJheS5mcm9tKFxuICAgIG5ldyBTZXQoXG4gICAgICAoY2Fscz8ucmVzdWx0cyA/PyBbXSlcbiAgICAgICAgLm1hcCgoYykgPT4gKGM/LmV4cGlyYXRpb25fZGF0ZSA/IFN0cmluZyhjLmV4cGlyYXRpb25fZGF0ZSkgOiAnJykpXG4gICAgICAgIC5maWx0ZXIoKHMpOiBzIGlzIHN0cmluZyA9PiBzLmxlbmd0aCA+IDApXG4gICAgKVxuICApXG4gICAgLnNvcnQoKVxuICAgIC5zbGljZSgwLCA1KTtcblxuICAvLyAzKSBGb3IgZWFjaCBleHBpcnksIHB1bGwgYSBoYW5kZnVsIG9mIHN0cmlrZXMgYXJvdW5kIHNwb3QgdXNpbmcgY3VycmVudCBxdW90ZXNcbiAgY29uc3Qgb3V0OiBRdW90ZVJvd1tdID0gW107XG5cbiAgZm9yIChjb25zdCBleHAgb2YgZXhwaXJpZXMpIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBqc29uPFNuYXBzaG90UmVzcD4oXG4gICAgICBgJHtQT0xZX0JBU0V9L3YzL3NuYXBzaG90L29wdGlvbnMvJHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgIHN5bWJvbFxuICAgICAgKX0/ZXhwaXJhdGlvbl9kYXRlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGV4cCl9JmNvbnRyYWN0X3R5cGU9Y2FsbCZsaW1pdD0yNTAmYXBpS2V5PSR7a2V5fWBcbiAgICApO1xuICAgIGNvbnN0IHJvd3MgPSAocmVzPy5yZXN1bHRzID8/IFtdKSBhcyBOb25OdWxsYWJsZTxTbmFwc2hvdFJlc3BbJ3Jlc3VsdHMnXT47XG4gICAgaWYgKCFyb3dzLmxlbmd0aCkgY29udGludWU7XG5cbiAgICAvLyBzb3J0IGJ5IHN0cmlrZVxuICAgIHJvd3Muc29ydCgoYSwgYikgPT4gYS5kZXRhaWxzLnN0cmlrZV9wcmljZSAtIGIuZGV0YWlscy5zdHJpa2VfcHJpY2UpO1xuXG4gICAgLy8gcGljayB+MTMgc3RyaWtlcyBhcm91bmQgc3BvdFxuICAgIGNvbnN0IG5lYXJlc3RJbmRleCA9XG4gICAgICByb3dzLnJlZHVjZShcbiAgICAgICAgKGJlc3QsIHIsIGkpID0+IHtcbiAgICAgICAgICBjb25zdCBkID0gTWF0aC5hYnMoci5kZXRhaWxzLnN0cmlrZV9wcmljZSAtIHNwb3QpO1xuICAgICAgICAgIHJldHVybiBkIDwgYmVzdC5kID8geyBpLCBkIH0gOiBiZXN0O1xuICAgICAgICB9LFxuICAgICAgICB7IGk6IDAsIGQ6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSB9XG4gICAgICApLmkgPz8gMDtcblxuICAgIGNvbnN0IHN0YXJ0ID0gTWF0aC5tYXgoMCwgbmVhcmVzdEluZGV4IC0gNik7XG4gICAgY29uc3Qgc2xpY2UgPSByb3dzLnNsaWNlKHN0YXJ0LCBzdGFydCArIDEzKTtcblxuICAgIC8vIFQgKHllYXJzLCBBQ1QvMzY1KVxuICAgIGNvbnN0IG1zID0gK25ldyBEYXRlKGV4cCkgLSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGRheXMgPSBNYXRoLm1heCgxLCBNYXRoLnJvdW5kKG1zIC8gODZfNDAwXzAwMCkpO1xuICAgIGNvbnN0IFQgPSBkYXlzIC8gMzY1O1xuXG4gICAgZm9yIChjb25zdCByIG9mIHNsaWNlKSB7XG4gICAgICBjb25zdCBLID0gci5kZXRhaWxzLnN0cmlrZV9wcmljZTtcbiAgICAgIGNvbnN0IGJpZCA9IHIuZGF5Py5iaWQgPz8gci5sYXN0X3F1b3RlPy5iaWQgPz8gMDtcbiAgICAgIGNvbnN0IGFzayA9IHIuZGF5Py5hc2sgPz8gci5sYXN0X3F1b3RlPy5hc2sgPz8gMDtcbiAgICAgIGNvbnN0IGxhc3QgPSByLmxhc3RfdHJhZGU/LnByaWNlID8/IDA7XG4gICAgICBjb25zdCBtaWQgPSBiaWQgPiAwICYmIGFzayA+IDAgPyAwLjUgKiAoYmlkICsgYXNrKSA6IGxhc3Q7XG4gICAgICBpZiAobWlkID4gMCAmJiBOdW1iZXIuaXNGaW5pdGUoSykgJiYgTnVtYmVyLmlzRmluaXRlKFQpKSB7XG4gICAgICAgIG91dC5wdXNoKHsgSywgVCwgY2FsbDogbWlkIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IHNwb3QsIHF1b3Rlczogb3V0IH07XG59Il0sIm5hbWVzIjpbIlBPTFlfQkFTRSIsImpzb24iLCJ1cmwiLCJyIiwiZmV0Y2giLCJvayIsIkVycm9yIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImZldGNoT3B0aW9uQ2hhaW5Qb2x5Z29uIiwic3ltYm9sIiwia2V5IiwicHJvY2VzcyIsImVudiIsIlBPTFlHT05fQVBJX0tFWSIsInUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJzcG90IiwicmVzdWx0cyIsInAiLCJwcmljZSIsImNhbHMiLCJleHBpcmllcyIsIkFycmF5IiwiZnJvbSIsIlNldCIsIm1hcCIsImMiLCJleHBpcmF0aW9uX2RhdGUiLCJTdHJpbmciLCJmaWx0ZXIiLCJzIiwibGVuZ3RoIiwic29ydCIsInNsaWNlIiwib3V0IiwiZXhwIiwicmVzIiwicm93cyIsImEiLCJiIiwiZGV0YWlscyIsInN0cmlrZV9wcmljZSIsIm5lYXJlc3RJbmRleCIsInJlZHVjZSIsImJlc3QiLCJpIiwiZCIsIk1hdGgiLCJhYnMiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsInN0YXJ0IiwibWF4IiwibXMiLCJEYXRlIiwibm93IiwiZGF5cyIsInJvdW5kIiwiVCIsIksiLCJiaWQiLCJkYXkiLCJsYXN0X3F1b3RlIiwiYXNrIiwibGFzdCIsImxhc3RfdHJhZGUiLCJtaWQiLCJpc0Zpbml0ZSIsInB1c2giLCJjYWxsIiwicXVvdGVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/data/providers/polygon.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/forecast/expSmooth.ts":
/*!***************************************!*\
  !*** ./src/lib/forecast/expSmooth.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   expSmoothForecast: () => (/* binding */ expSmoothForecast)\n/* harmony export */ });\nfunction expSmoothForecast(values, alpha = 0.3, horizon = 8) {\n    if (!Array.isArray(values) || values.length === 0) return [];\n    if (!Number.isFinite(alpha)) alpha = 0.3;\n    alpha = Math.min(1, Math.max(1e-6, alpha));\n    horizon = Math.max(1, Math.floor(horizon));\n    const clean = values.filter((v)=>Number.isFinite(v));\n    if (clean.length === 0) return [];\n    let level = clean[0];\n    for(let i = 1; i < clean.length; i++)level = alpha * clean[i] + (1 - alpha) * level;\n    const residuals = clean.map((v)=>v - level);\n    const denom = Math.max(1, residuals.length - 1);\n    const s2 = residuals.reduce((s, x)=>s + x * x, 0) / denom;\n    const sigma = Math.sqrt(Math.max(s2, 1e-12));\n    const z = 1.64;\n    const mk = (iv)=>{\n        const lo = Math.max(0, iv - z * sigma);\n        const hi = Math.max(lo, iv + z * sigma);\n        return {\n            iv: Math.max(0, iv),\n            ci: [\n                lo,\n                hi\n            ]\n        };\n    };\n    return Array.from({\n        length: horizon\n    }, (_, i)=>{\n        const f = mk(level);\n        return {\n            t: i + 1,\n            ...f\n        };\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2ZvcmVjYXN0L2V4cFNtb290aC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sU0FBU0Esa0JBQWtCQyxNQUFnQixFQUFFQyxRQUFRLEdBQUcsRUFBRUMsVUFBVSxDQUFDO0lBQzFFLElBQUksQ0FBQ0MsTUFBTUMsT0FBTyxDQUFDSixXQUFXQSxPQUFPSyxNQUFNLEtBQUssR0FBRyxPQUFPLEVBQUU7SUFDNUQsSUFBSSxDQUFDQyxPQUFPQyxRQUFRLENBQUNOLFFBQVFBLFFBQVE7SUFDckNBLFFBQVFPLEtBQUtDLEdBQUcsQ0FBQyxHQUFHRCxLQUFLRSxHQUFHLENBQUMsTUFBTVQ7SUFDbkNDLFVBQVVNLEtBQUtFLEdBQUcsQ0FBQyxHQUFHRixLQUFLRyxLQUFLLENBQUNUO0lBRWpDLE1BQU1VLFFBQVFaLE9BQU9hLE1BQU0sQ0FBQ0MsQ0FBQUEsSUFBS1IsT0FBT0MsUUFBUSxDQUFDTztJQUNqRCxJQUFJRixNQUFNUCxNQUFNLEtBQUssR0FBRyxPQUFPLEVBQUU7SUFFakMsSUFBSVUsUUFBUUgsS0FBSyxDQUFDLEVBQUU7SUFDcEIsSUFBSyxJQUFJSSxJQUFJLEdBQUdBLElBQUlKLE1BQU1QLE1BQU0sRUFBRVcsSUFBS0QsUUFBUWQsUUFBUVcsS0FBSyxDQUFDSSxFQUFFLEdBQUcsQ0FBQyxJQUFJZixLQUFJLElBQUtjO0lBRWhGLE1BQU1FLFlBQVlMLE1BQU1NLEdBQUcsQ0FBQ0osQ0FBQUEsSUFBS0EsSUFBSUM7SUFDckMsTUFBTUksUUFBUVgsS0FBS0UsR0FBRyxDQUFDLEdBQUdPLFVBQVVaLE1BQU0sR0FBRztJQUM3QyxNQUFNZSxLQUFLSCxVQUFVSSxNQUFNLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUQsSUFBSUMsSUFBSUEsR0FBRyxLQUFLSjtJQUN0RCxNQUFNSyxRQUFRaEIsS0FBS2lCLElBQUksQ0FBQ2pCLEtBQUtFLEdBQUcsQ0FBQ1UsSUFBSTtJQUVyQyxNQUFNTSxJQUFJO0lBQ1YsTUFBTUMsS0FBSyxDQUFDQztRQUNWLE1BQU1DLEtBQUtyQixLQUFLRSxHQUFHLENBQUMsR0FBR2tCLEtBQUtGLElBQUlGO1FBQ2hDLE1BQU1NLEtBQUt0QixLQUFLRSxHQUFHLENBQUNtQixJQUFJRCxLQUFLRixJQUFJRjtRQUNqQyxPQUFPO1lBQUVJLElBQUlwQixLQUFLRSxHQUFHLENBQUMsR0FBR2tCO1lBQUtHLElBQUk7Z0JBQUNGO2dCQUFJQzthQUFHO1FBQUM7SUFDN0M7SUFFQSxPQUFPM0IsTUFBTTZCLElBQUksQ0FBQztRQUFFM0IsUUFBUUg7SUFBUSxHQUFHLENBQUMrQixHQUFHakI7UUFDekMsTUFBTWtCLElBQUlQLEdBQUdaO1FBQ2IsT0FBTztZQUFFb0IsR0FBR25CLElBQUk7WUFBRyxHQUFHa0IsQ0FBQztRQUFDO0lBQzFCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b2xhdGl4Ly4vc3JjL2xpYi9mb3JlY2FzdC9leHBTbW9vdGgudHM/YjkyNyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdHlwZSBJVkZvcmVjYXN0ID0geyB0OiBudW1iZXI7IGl2OiBudW1iZXI7IGNpOiBbbnVtYmVyLCBudW1iZXJdIH07XG5cbmV4cG9ydCBmdW5jdGlvbiBleHBTbW9vdGhGb3JlY2FzdCh2YWx1ZXM6IG51bWJlcltdLCBhbHBoYSA9IDAuMywgaG9yaXpvbiA9IDgpOiBJVkZvcmVjYXN0W10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWVzKSB8fCB2YWx1ZXMubGVuZ3RoID09PSAwKSByZXR1cm4gW107XG4gIGlmICghTnVtYmVyLmlzRmluaXRlKGFscGhhKSkgYWxwaGEgPSAwLjM7XG4gIGFscGhhID0gTWF0aC5taW4oMSwgTWF0aC5tYXgoMWUtNiwgYWxwaGEpKTtcbiAgaG9yaXpvbiA9IE1hdGgubWF4KDEsIE1hdGguZmxvb3IoaG9yaXpvbikpO1xuXG4gIGNvbnN0IGNsZWFuID0gdmFsdWVzLmZpbHRlcih2ID0+IE51bWJlci5pc0Zpbml0ZSh2KSk7XG4gIGlmIChjbGVhbi5sZW5ndGggPT09IDApIHJldHVybiBbXTtcblxuICBsZXQgbGV2ZWwgPSBjbGVhblswXTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBjbGVhbi5sZW5ndGg7IGkrKykgbGV2ZWwgPSBhbHBoYSAqIGNsZWFuW2ldICsgKDEgLSBhbHBoYSkgKiBsZXZlbDtcblxuICBjb25zdCByZXNpZHVhbHMgPSBjbGVhbi5tYXAodiA9PiB2IC0gbGV2ZWwpO1xuICBjb25zdCBkZW5vbSA9IE1hdGgubWF4KDEsIHJlc2lkdWFscy5sZW5ndGggLSAxKTtcbiAgY29uc3QgczIgPSByZXNpZHVhbHMucmVkdWNlKChzLCB4KSA9PiBzICsgeCAqIHgsIDApIC8gZGVub207XG4gIGNvbnN0IHNpZ21hID0gTWF0aC5zcXJ0KE1hdGgubWF4KHMyLCAxZS0xMikpO1xuXG4gIGNvbnN0IHogPSAxLjY0O1xuICBjb25zdCBtayA9IChpdjogbnVtYmVyKTogT21pdDxJVkZvcmVjYXN0LCAndCc+ID0+IHtcbiAgICBjb25zdCBsbyA9IE1hdGgubWF4KDAsIGl2IC0geiAqIHNpZ21hKTtcbiAgICBjb25zdCBoaSA9IE1hdGgubWF4KGxvLCBpdiArIHogKiBzaWdtYSk7XG4gICAgcmV0dXJuIHsgaXY6IE1hdGgubWF4KDAsIGl2KSwgY2k6IFtsbywgaGldIH07XG4gIH07XG5cbiAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IGhvcml6b24gfSwgKF8sIGkpID0+IHtcbiAgICBjb25zdCBmID0gbWsobGV2ZWwpO1xuICAgIHJldHVybiB7IHQ6IGkgKyAxLCAuLi5mIH07XG4gIH0pO1xufSJdLCJuYW1lcyI6WyJleHBTbW9vdGhGb3JlY2FzdCIsInZhbHVlcyIsImFscGhhIiwiaG9yaXpvbiIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsIk51bWJlciIsImlzRmluaXRlIiwiTWF0aCIsIm1pbiIsIm1heCIsImZsb29yIiwiY2xlYW4iLCJmaWx0ZXIiLCJ2IiwibGV2ZWwiLCJpIiwicmVzaWR1YWxzIiwibWFwIiwiZGVub20iLCJzMiIsInJlZHVjZSIsInMiLCJ4Iiwic2lnbWEiLCJzcXJ0IiwieiIsIm1rIiwiaXYiLCJsbyIsImhpIiwiY2kiLCJmcm9tIiwiXyIsImYiLCJ0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/forecast/expSmooth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/ivs/svi.ts":
/*!****************************!*\
  !*** ./src/lib/ivs/svi.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fitSVI: () => (/* binding */ fitSVI),\n/* harmony export */   surfaceGridFromSVI: () => (/* binding */ surfaceGridFromSVI)\n/* harmony export */ });\n// Raw SVI: w(k) = a + b*(rho*(k-m) + sqrt((k-m)^2 + sigma^2)) where w=iv^2*T\nfunction wSVI(k, p) {\n    return p.a + p.b * (p.rho * (k - p.m) + Math.sqrt((k - p.m) ** 2 + p.sigma ** 2));\n}\nfunction fitSVI(logMoneyness, totalVar) {\n    if (logMoneyness.length !== totalVar.length || totalVar.length === 0) {\n        throw new Error(\"fitSVI: inputs must be same nonzero length\");\n    }\n    const a0 = Math.max(1e-8, Math.min(...totalVar) * 0.9);\n    const m0 = logMoneyness.reduce((s, x)=>s + x, 0) / Math.max(1, logMoneyness.length);\n    let best = {\n        a: a0,\n        b: 0.1,\n        rho: 0.0,\n        m: m0,\n        sigma: 0.2\n    };\n    let bestLoss = Number.POSITIVE_INFINITY;\n    const rng = (lo, hi, steps)=>Array.from({\n            length: steps\n        }, (_, i)=>lo + (hi - lo) * i / (steps - 1));\n    for (const b of rng(0.01, 2.0, 8))for (const rho of rng(-0.9, 0.9, 7))for (const sigma of rng(0.01, 1.0, 8)){\n        const p = {\n            a: a0,\n            b,\n            rho,\n            m: m0,\n            sigma\n        };\n        const loss = totalVar.reduce((s, w, i)=>{\n            const e = wSVI(logMoneyness[i], p) - w;\n            return s + e * e;\n        }, 0);\n        if (loss < bestLoss) {\n            best = p;\n            bestLoss = loss;\n        }\n    }\n    for(let it = 0; it < 200; it++){\n        const da = (Math.random() - 0.5) * 0.002;\n        const dm = (Math.random() - 0.5) * 0.01;\n        const db = (Math.random() - 0.5) * 0.01;\n        const dr = (Math.random() - 0.5) * 0.02;\n        const ds = (Math.random() - 0.5) * 0.01;\n        const cand = {\n            a: Math.max(1e-6, best.a + da),\n            b: Math.max(1e-6, best.b + db),\n            rho: Math.max(-0.999, Math.min(0.999, best.rho + dr)),\n            m: best.m + dm,\n            sigma: Math.max(1e-4, best.sigma + ds)\n        };\n        const loss = totalVar.reduce((s, w, i)=>{\n            const e = wSVI(logMoneyness[i], cand) - w;\n            return s + e * e;\n        }, 0);\n        if (loss < bestLoss) {\n            best = cand;\n            bestLoss = loss;\n        }\n    }\n    return best;\n}\nfunction surfaceGridFromSVI(strikes, tenors, f0, r, q, fits) {\n    const grid = [];\n    for (const T of tenors){\n        const p = fits[T];\n        if (!p) continue;\n        for (const K of strikes){\n            const k = Math.log(K / f0);\n            const w = wSVI(k, p);\n            const iv = Math.sqrt(Math.max(w, 1e-8) / Math.max(T, 1e-6));\n            grid.push({\n                k: K,\n                t: Math.round(T * 365),\n                iv\n            });\n        }\n    }\n    return grid;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxNQUFNTSxLQUFLYixLQUFLLEdBQUNrQztRQUNuQztRQUNBLE1BQU1ULE9BQU90QixTQUFTTyxNQUFNLENBQUMsQ0FBQ0MsR0FBRWUsR0FBRUY7WUFBTSxNQUFNRyxJQUFFcEMsS0FBS1csWUFBWSxDQUFDc0IsRUFBRSxFQUFFVyxRQUFNVDtZQUFHLE9BQU9mLElBQUVnQixJQUFFQTtRQUFHLEdBQUU7UUFDL0YsSUFBSUYsT0FBT1gsVUFBVTtZQUFFRCxPQUFLc0I7WUFBYXJCLFdBQVNXO1FBQU07SUFDMUQ7SUFDQSxPQUFPWjtBQUNUO0FBRU8sU0FBU3VCLG1CQUNkQyxPQUFnQixFQUFFQyxNQUFlLEVBQUVDLEVBQVMsRUFBRUMsQ0FBUSxFQUFFQyxDQUFRLEVBQUVDLElBQStDO0lBRWpILE1BQU1DLE9BQTBDLEVBQUU7SUFDbEQsS0FBSyxNQUFNQyxLQUFLTixPQUFPO1FBQ3JCLE1BQU03QyxJQUFJaUQsSUFBSSxDQUFDRSxFQUFFO1FBQUUsSUFBSSxDQUFDbkQsR0FBRztRQUMzQixLQUFLLE1BQU1vRCxLQUFLUixRQUFRO1lBQ3RCLE1BQU03QyxJQUFJTSxLQUFLZ0QsR0FBRyxDQUFDRCxJQUFJTjtZQUN2QixNQUFNYixJQUFJbkMsS0FBS0MsR0FBRUM7WUFDakIsTUFBTXNELEtBQUtqRCxLQUFLQyxJQUFJLENBQUNELEtBQUtTLEdBQUcsQ0FBQ21CLEdBQUUsUUFBTTVCLEtBQUtTLEdBQUcsQ0FBQ3FDLEdBQUU7WUFDakRELEtBQUtLLElBQUksQ0FBQztnQkFBRXhELEdBQUdxRDtnQkFBR0ksR0FBR25ELEtBQUtvRCxLQUFLLENBQUNOLElBQUU7Z0JBQU1HO1lBQUc7UUFDN0M7SUFDRjtJQUNBLE9BQU9KO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b2xhdGl4Ly4vc3JjL2xpYi9pdnMvc3ZpLnRzPzFmOWMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gUmF3IFNWSTogdyhrKSA9IGEgKyBiKihyaG8qKGstbSkgKyBzcXJ0KChrLW0pXjIgKyBzaWdtYV4yKSkgd2hlcmUgdz1pdl4yKlRcbnR5cGUgU1ZJID0geyBhOm51bWJlcjsgYjpudW1iZXI7IHJobzpudW1iZXI7IG06bnVtYmVyOyBzaWdtYTpudW1iZXIgfTtcblxuZnVuY3Rpb24gd1NWSShrOm51bWJlciwgcDpTVkkpIHtcbiAgcmV0dXJuIHAuYSArIHAuYioocC5yaG8qKGstcC5tKSArIE1hdGguc3FydCgoay1wLm0pKioyICsgcC5zaWdtYSoqMikpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZml0U1ZJKGxvZ01vbmV5bmVzczpudW1iZXJbXSwgdG90YWxWYXI6bnVtYmVyW10pOiBTVkkge1xuICBpZiAobG9nTW9uZXluZXNzLmxlbmd0aCAhPT0gdG90YWxWYXIubGVuZ3RoIHx8IHRvdGFsVmFyLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignZml0U1ZJOiBpbnB1dHMgbXVzdCBiZSBzYW1lIG5vbnplcm8gbGVuZ3RoJyk7XG4gIH1cbiAgY29uc3QgYTAgPSBNYXRoLm1heCgxZS04LCBNYXRoLm1pbiguLi50b3RhbFZhcikqMC45KTtcbiAgY29uc3QgbTAgPSBsb2dNb25leW5lc3MucmVkdWNlKChzLHgpPT5zK3gsMCkvTWF0aC5tYXgoMSxsb2dNb25leW5lc3MubGVuZ3RoKTtcbiAgbGV0IGJlc3Q6IFNWSSA9IHsgYTogYTAsIGI6IDAuMSwgcmhvOiAwLjAsIG06IG0wLCBzaWdtYTogMC4yIH07XG4gIGxldCBiZXN0TG9zcyA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgY29uc3Qgcm5nID0gKGxvOm51bWJlcixoaTpudW1iZXIsc3RlcHM6bnVtYmVyKT0+QXJyYXkuZnJvbSh7bGVuZ3RoOnN0ZXBzfSwoXyxpKT0+bG8rKGhpLWxvKSppLyhzdGVwcy0xKSk7XG5cbiAgZm9yIChjb25zdCBiIG9mIHJuZygwLjAxLCAyLjAsIDgpKVxuICBmb3IgKGNvbnN0IHJobyBvZiBybmcoLTAuOSwgMC45LCA3KSlcbiAgZm9yIChjb25zdCBzaWdtYSBvZiBybmcoMC4wMSwgMS4wLCA4KSl7XG4gICAgY29uc3QgcCA9IHsgYTphMCwgYiwgcmhvLCBtOm0wLCBzaWdtYSB9O1xuICAgIGNvbnN0IGxvc3MgPSB0b3RhbFZhci5yZWR1Y2UoKHMsdyxpKT0+eyBjb25zdCBlPXdTVkkobG9nTW9uZXluZXNzW2ldLCBwKS13OyByZXR1cm4gcytlKmU7IH0sMCk7XG4gICAgaWYgKGxvc3MgPCBiZXN0TG9zcykgeyBiZXN0ID0gcDsgYmVzdExvc3MgPSBsb3NzOyB9XG4gIH1cbiAgZm9yIChsZXQgaXQ9MDsgaXQ8MjAwOyBpdCsrKXtcbiAgICBjb25zdCBkYSA9IChNYXRoLnJhbmRvbSgpLTAuNSkqMC4wMDI7XG4gICAgY29uc3QgZG0gPSAoTWF0aC5yYW5kb20oKS0wLjUpKjAuMDE7XG4gICAgY29uc3QgZGIgPSAoTWF0aC5yYW5kb20oKS0wLjUpKjAuMDE7XG4gICAgY29uc3QgZHIgPSAoTWF0aC5yYW5kb20oKS0wLjUpKjAuMDI7XG4gICAgY29uc3QgZHMgPSAoTWF0aC5yYW5kb20oKS0wLjUpKjAuMDE7XG4gICAgY29uc3QgY2FuZCA9IHtcbiAgICAgIGE6IE1hdGgubWF4KDFlLTYsIGJlc3QuYStkYSksXG4gICAgICBiOiBNYXRoLm1heCgxZS02LCBiZXN0LmIrZGIpLFxuICAgICAgcmhvOiBNYXRoLm1heCgtMC45OTksIE1hdGgubWluKDAuOTk5LCBiZXN0LnJobytkcikpLFxuICAgICAgbTogYmVzdC5tK2RtLFxuICAgICAgc2lnbWE6IE1hdGgubWF4KDFlLTQsIGJlc3Quc2lnbWErZHMpXG4gICAgfTtcbiAgICBjb25zdCBsb3NzID0gdG90YWxWYXIucmVkdWNlKChzLHcsaSk9PnsgY29uc3QgZT13U1ZJKGxvZ01vbmV5bmVzc1tpXSwgY2FuZCktdzsgcmV0dXJuIHMrZSplOyB9LDApO1xuICAgIGlmIChsb3NzIDwgYmVzdExvc3MpIHsgYmVzdD1jYW5kIGFzIFNWSTsgYmVzdExvc3M9bG9zczsgfVxuICB9XG4gIHJldHVybiBiZXN0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3VyZmFjZUdyaWRGcm9tU1ZJKFxuICBzdHJpa2VzOm51bWJlcltdLCB0ZW5vcnM6bnVtYmVyW10sIGYwOm51bWJlciwgcjpudW1iZXIsIHE6bnVtYmVyLCBmaXRzOiBSZWNvcmQ8bnVtYmVyLCBSZXR1cm5UeXBlPHR5cGVvZiBmaXRTVkk+PlxuKXtcbiAgY29uc3QgZ3JpZDoge2s6bnVtYmVyOyB0Om51bWJlcjsgaXY6bnVtYmVyfVtdID0gW107XG4gIGZvciAoY29uc3QgVCBvZiB0ZW5vcnMpe1xuICAgIGNvbnN0IHAgPSBmaXRzW1RdOyBpZiAoIXApIGNvbnRpbnVlO1xuICAgIGZvciAoY29uc3QgSyBvZiBzdHJpa2VzKXtcbiAgICAgIGNvbnN0IGsgPSBNYXRoLmxvZyhLIC8gZjApO1xuICAgICAgY29uc3QgdyA9IHdTVkkoayxwKTtcbiAgICAgIGNvbnN0IGl2ID0gTWF0aC5zcXJ0KE1hdGgubWF4KHcsMWUtOCkvTWF0aC5tYXgoVCwxZS02KSk7XG4gICAgICBncmlkLnB1c2goeyBrOiBLLCB0OiBNYXRoLnJvdW5kKFQqMzY1KSwgaXYgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBncmlkO1xufSJdLCJuYW1lcyI6WyJ3U1ZJIiwiayIsInAiLCJhIiwiYiIsInJobyIsIm0iLCJNYXRoIiwic3FydCIsInNpZ21hIiwiZml0U1ZJIiwibG9nTW9uZXluZXNzIiwidG90YWxWYXIiLCJsZW5ndGgiLCJFcnJvciIsImEwIiwibWF4IiwibWluIiwibTAiLCJyZWR1Y2UiLCJzIiwieCIsImJlc3QiLCJiZXN0TG9zcyIsIk51bWJlciIsIlBPU0lUSVZFX0lORklOSVRZIiwicm5nIiwibG8iLCJoaSIsInN0ZXBzIiwiQXJyYXkiLCJmcm9tIiwiXyIsImkiLCJsb3NzIiwidyIsImUiLCJpdCIsImRhIiwicmFuZG9tIiwiZG0iLCJkYiIsImRyIiwiZHMiLCJjYW5kIiwic3VyZmFjZUdyaWRGcm9tU1ZJIiwic3RyaWtlcyIsInRlbm9ycyIsImYwIiwiciIsInEiLCJmaXRzIiwiZ3JpZCIsIlQiLCJLIiwibG9nIiwiaXYiLCJwdXNoIiwidCIsInJvdW5kIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/ivs/svi.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/math/blackscholes.ts":
/*!**************************************!*\
  !*** ./src/lib/math/blackscholes.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bsPrice: () => (/* binding */ bsPrice),\n/* harmony export */   greeks: () => (/* binding */ greeks),\n/* harmony export */   impliedVol: () => (/* binding */ impliedVol)\n/* harmony export */ });\n// src/lib/math/blackscholes.ts\n// --- math helpers ---\nfunction erf(x) {\n    // Abramowitz & Stegun 7.1.26\n    const sign = x < 0 ? -1 : 1;\n    const a1 = 0.254829592, a2 = -0.284496736, a3 = 1.421413741;\n    const a4 = -1.453152027, a5 = 1.061405429, p = 0.3275911;\n    const ax = Math.abs(x);\n    const t = 1 / (1 + p * ax);\n    const y = 1 - ((((a5 * t + a4) * t + a3) * t + a2) * t + a1) * t * Math.exp(-ax * ax);\n    return sign * y;\n}\nfunction normCDF(x) {\n    return 0.5 * (1 + erf(x / Math.SQRT2));\n}\nfunction normPDF(x) {\n    return Math.exp(-0.5 * x * x) / Math.sqrt(2 * Math.PI);\n}\n// --- pricing ---\nfunction bsPrice(cp, S, K, r, q, sigma, T) {\n    if (T <= 0 || sigma <= 0) {\n        // discounted intrinsic is another convention, but tests use spot intrinsic\n        return cp === \"C\" ? Math.max(0, S - K) : Math.max(0, K - S);\n    }\n    const sqrtT = Math.sqrt(T);\n    const d1 = (Math.log(S / K) + (r - q + 0.5 * sigma * sigma) * T) / (sigma * sqrtT);\n    const d2 = d1 - sigma * sqrtT;\n    if (cp === \"C\") {\n        return S * Math.exp(-q * T) * normCDF(d1) - K * Math.exp(-r * T) * normCDF(d2);\n    } else {\n        return K * Math.exp(-r * T) * normCDF(-d2) - S * Math.exp(-q * T) * normCDF(-d1);\n    }\n}\n// --- greeks ---\nfunction greeks(cp, S, K, r, q, sigma, T) {\n    if (T <= 0 || sigma <= 0) {\n        // Safe, non-NaN outputs when at expiry or zero vol\n        return {\n            delta: 0,\n            gamma: 0,\n            vega: 0,\n            theta: 0,\n            rho: 0\n        };\n    }\n    const sqrtT = Math.sqrt(T);\n    const d1 = (Math.log(S / K) + (r - q + 0.5 * sigma * sigma) * T) / (sigma * sqrtT);\n    const d2 = d1 - sigma * sqrtT;\n    const pdf = normPDF(d1);\n    const delta = cp === \"C\" ? Math.exp(-q * T) * normCDF(d1) : Math.exp(-q * T) * (normCDF(d1) - 1);\n    const gamma = Math.exp(-q * T) * pdf / (S * sigma * sqrtT);\n    const vega = S * Math.exp(-q * T) * pdf * sqrtT;\n    const theta = cp === \"C\" ? -S * pdf * sigma * Math.exp(-q * T) / (2 * sqrtT) - r * K * Math.exp(-r * T) * normCDF(d2) + q * S * Math.exp(-q * T) * normCDF(d1) : -S * pdf * sigma * Math.exp(-q * T) / (2 * sqrtT) + r * K * Math.exp(-r * T) * normCDF(-d2) - q * S * Math.exp(-q * T) * normCDF(-d1);\n    const rho = cp === \"C\" ? K * T * Math.exp(-r * T) * normCDF(d2) : -K * T * Math.exp(-r * T) * normCDF(-d2);\n    return {\n        delta,\n        gamma,\n        vega,\n        theta,\n        rho\n    };\n}\n// --- implied vol via bracketing (binary search) ---\n// (Brent is fine too; tests only require a stable, accurate inversion.)\nfunction impliedVol(cp, S, K, r, q, T, price, lo = 1e-6, hi = 5.0, iters = 80) {\n    // guard rails\n    if (price <= 0) return 0;\n    if (T <= 0) return 0;\n    for(let i = 0; i < iters; i++){\n        const mid = 0.5 * (lo + hi);\n        const pm = bsPrice(cp, S, K, r, q, mid, T);\n        if (pm > price) hi = mid;\n        else lo = mid;\n    }\n    return 0.5 * (lo + hi);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TztRQUFFRTtRQUFPQztRQUFPQztRQUFNQztRQUFPQztJQUFJO0FBQzFDO0FBRUEscURBQXFEO0FBQ3JELHdFQUF3RTtBQUNqRSxTQUFTRSxXQUNkbkIsRUFBYSxFQUNiQyxDQUFTLEVBQUVDLENBQVMsRUFDcEJDLENBQVMsRUFBRUMsQ0FBUyxFQUNwQkUsQ0FBUyxFQUFFYyxLQUFhLEVBQ3hCQyxLQUFLLElBQUksRUFBRUMsS0FBSyxHQUFHLEVBQUVDLFFBQVEsRUFBRTtJQUUvQixjQUFjO0lBQ2QsSUFBSUgsU0FBUyxHQUFHLE9BQU87SUFDdkIsSUFBSWQsS0FBSyxHQUFHLE9BQU87SUFFbkIsSUFBSyxJQUFJa0IsSUFBSSxHQUFHQSxJQUFJRCxPQUFPQyxJQUFLO1FBQzlCLE1BQU1DLE1BQU0sTUFBT0osQ0FBQUEsS0FBS0MsRUFBQztRQUN6QixNQUFNSSxLQUFLM0IsUUFBUUMsSUFBSUMsR0FBR0MsR0FBR0MsR0FBR0MsR0FBR3FCLEtBQUtuQjtRQUN4QyxJQUFJb0IsS0FBS04sT0FBT0UsS0FBS0c7YUFBVUosS0FBS0k7SUFDdEM7SUFDQSxPQUFPLE1BQU9KLENBQUFBLEtBQUtDLEVBQUM7QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b2xhdGl4Ly4vc3JjL2xpYi9tYXRoL2JsYWNrc2Nob2xlcy50cz8wNmE3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9saWIvbWF0aC9ibGFja3NjaG9sZXMudHNcblxuLy8gLS0tIG1hdGggaGVscGVycyAtLS1cbmZ1bmN0aW9uIGVyZih4OiBudW1iZXIpOiBudW1iZXIge1xuICAvLyBBYnJhbW93aXR6ICYgU3RlZ3VuIDcuMS4yNlxuICBjb25zdCBzaWduID0geCA8IDAgPyAtMSA6IDE7XG4gIGNvbnN0IGExID0gMC4yNTQ4Mjk1OTIsIGEyID0gLTAuMjg0NDk2NzM2LCBhMyA9IDEuNDIxNDEzNzQxO1xuICBjb25zdCBhNCA9IC0xLjQ1MzE1MjAyNywgYTUgPSAxLjA2MTQwNTQyOSwgcCA9IDAuMzI3NTkxMTtcbiAgY29uc3QgYXggPSBNYXRoLmFicyh4KTtcbiAgY29uc3QgdCA9IDEgLyAoMSArIHAgKiBheCk7XG4gIGNvbnN0IHkgPSAxIC0gKCgoKChhNSp0ICsgYTQpKnQpICsgYTMpKnQgKyBhMikqdCArIGExKSp0Kk1hdGguZXhwKC1heCpheCk7XG4gIHJldHVybiBzaWduICogeTtcbn1cbmZ1bmN0aW9uIG5vcm1DREYoeDogbnVtYmVyKTogbnVtYmVyIHsgcmV0dXJuIDAuNSAqICgxICsgZXJmKHggLyBNYXRoLlNRUlQyKSk7IH1cbmZ1bmN0aW9uIG5vcm1QREYoeDogbnVtYmVyKTogbnVtYmVyIHsgcmV0dXJuIE1hdGguZXhwKC0wLjUgKiB4ICogeCkgLyBNYXRoLnNxcnQoMiAqIE1hdGguUEkpOyB9XG5cbi8vIC0tLSBwcmljaW5nIC0tLVxuZXhwb3J0IGZ1bmN0aW9uIGJzUHJpY2UoXG4gIGNwOiAnQycgfCAnUCcsXG4gIFM6IG51bWJlciwgSzogbnVtYmVyLFxuICByOiBudW1iZXIsIHE6IG51bWJlcixcbiAgc2lnbWE6IG51bWJlciwgVDogbnVtYmVyXG4pOiBudW1iZXIge1xuICBpZiAoVCA8PSAwIHx8IHNpZ21hIDw9IDApIHtcbiAgICAvLyBkaXNjb3VudGVkIGludHJpbnNpYyBpcyBhbm90aGVyIGNvbnZlbnRpb24sIGJ1dCB0ZXN0cyB1c2Ugc3BvdCBpbnRyaW5zaWNcbiAgICByZXR1cm4gY3AgPT09ICdDJyA/IE1hdGgubWF4KDAsIFMgLSBLKSA6IE1hdGgubWF4KDAsIEsgLSBTKTtcbiAgfVxuICBjb25zdCBzcXJ0VCA9IE1hdGguc3FydChUKTtcbiAgY29uc3QgZDEgPSAoTWF0aC5sb2coUyAvIEspICsgKHIgLSBxICsgMC41ICogc2lnbWEgKiBzaWdtYSkgKiBUKSAvIChzaWdtYSAqIHNxcnRUKTtcbiAgY29uc3QgZDIgPSBkMSAtIHNpZ21hICogc3FydFQ7XG4gIGlmIChjcCA9PT0gJ0MnKSB7XG4gICAgcmV0dXJuIFMgKiBNYXRoLmV4cCgtcSAqIFQpICogbm9ybUNERihkMSkgLSBLICogTWF0aC5leHAoLXIgKiBUKSAqIG5vcm1DREYoZDIpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBLICogTWF0aC5leHAoLXIgKiBUKSAqIG5vcm1DREYoLWQyKSAtIFMgKiBNYXRoLmV4cCgtcSAqIFQpICogbm9ybUNERigtZDEpO1xuICB9XG59XG5cbi8vIC0tLSBncmVla3MgLS0tXG5leHBvcnQgZnVuY3Rpb24gZ3JlZWtzKFxuICBjcDogJ0MnIHwgJ1AnLFxuICBTOiBudW1iZXIsIEs6IG51bWJlcixcbiAgcjogbnVtYmVyLCBxOiBudW1iZXIsXG4gIHNpZ21hOiBudW1iZXIsIFQ6IG51bWJlclxuKTogeyBkZWx0YTogbnVtYmVyOyBnYW1tYTogbnVtYmVyOyB2ZWdhOiBudW1iZXI7IHRoZXRhOiBudW1iZXI7IHJobzogbnVtYmVyIH0ge1xuICBpZiAoVCA8PSAwIHx8IHNpZ21hIDw9IDApIHtcbiAgICAvLyBTYWZlLCBub24tTmFOIG91dHB1dHMgd2hlbiBhdCBleHBpcnkgb3IgemVybyB2b2xcbiAgICByZXR1cm4geyBkZWx0YTogMCwgZ2FtbWE6IDAsIHZlZ2E6IDAsIHRoZXRhOiAwLCByaG86IDAgfTtcbiAgfVxuXG4gIGNvbnN0IHNxcnRUID0gTWF0aC5zcXJ0KFQpO1xuICBjb25zdCBkMSA9IChNYXRoLmxvZyhTIC8gSykgKyAociAtIHEgKyAwLjUgKiBzaWdtYSAqIHNpZ21hKSAqIFQpIC8gKHNpZ21hICogc3FydFQpO1xuICBjb25zdCBkMiA9IGQxIC0gc2lnbWEgKiBzcXJ0VDtcbiAgY29uc3QgcGRmID0gbm9ybVBERihkMSk7XG5cbiAgY29uc3QgZGVsdGEgPSBjcCA9PT0gJ0MnXG4gICAgPyBNYXRoLmV4cCgtcSAqIFQpICogbm9ybUNERihkMSlcbiAgICA6IE1hdGguZXhwKC1xICogVCkgKiAobm9ybUNERihkMSkgLSAxKTtcblxuICBjb25zdCBnYW1tYSA9IE1hdGguZXhwKC1xICogVCkgKiBwZGYgLyAoUyAqIHNpZ21hICogc3FydFQpO1xuXG4gIGNvbnN0IHZlZ2EgPSBTICogTWF0aC5leHAoLXEgKiBUKSAqIHBkZiAqIHNxcnRUO1xuXG4gIGNvbnN0IHRoZXRhID0gY3AgPT09ICdDJ1xuICAgID8gKCAtUyAqIHBkZiAqIHNpZ21hICogTWF0aC5leHAoLXEgKiBUKSApIC8gKDIgKiBzcXJ0VClcbiAgICAgIC0gciAqIEsgKiBNYXRoLmV4cCgtciAqIFQpICogbm9ybUNERihkMilcbiAgICAgICsgcSAqIFMgKiBNYXRoLmV4cCgtcSAqIFQpICogbm9ybUNERihkMSlcbiAgICA6ICggLVMgKiBwZGYgKiBzaWdtYSAqIE1hdGguZXhwKC1xICogVCkgKSAvICgyICogc3FydFQpXG4gICAgICArIHIgKiBLICogTWF0aC5leHAoLXIgKiBUKSAqIG5vcm1DREYoLWQyKVxuICAgICAgLSBxICogUyAqIE1hdGguZXhwKC1xICogVCkgKiBub3JtQ0RGKC1kMSk7XG5cbiAgY29uc3QgcmhvID0gY3AgPT09ICdDJ1xuICAgID8gSyAqIFQgKiBNYXRoLmV4cCgtciAqIFQpICogbm9ybUNERihkMilcbiAgICA6IC1LICogVCAqIE1hdGguZXhwKC1yICogVCkgKiBub3JtQ0RGKC1kMik7XG5cbiAgcmV0dXJuIHsgZGVsdGEsIGdhbW1hLCB2ZWdhLCB0aGV0YSwgcmhvIH07XG59XG5cbi8vIC0tLSBpbXBsaWVkIHZvbCB2aWEgYnJhY2tldGluZyAoYmluYXJ5IHNlYXJjaCkgLS0tXG4vLyAoQnJlbnQgaXMgZmluZSB0b287IHRlc3RzIG9ubHkgcmVxdWlyZSBhIHN0YWJsZSwgYWNjdXJhdGUgaW52ZXJzaW9uLilcbmV4cG9ydCBmdW5jdGlvbiBpbXBsaWVkVm9sKFxuICBjcDogJ0MnIHwgJ1AnLFxuICBTOiBudW1iZXIsIEs6IG51bWJlcixcbiAgcjogbnVtYmVyLCBxOiBudW1iZXIsXG4gIFQ6IG51bWJlciwgcHJpY2U6IG51bWJlcixcbiAgbG8gPSAxZS02LCBoaSA9IDUuMCwgaXRlcnMgPSA4MFxuKTogbnVtYmVyIHtcbiAgLy8gZ3VhcmQgcmFpbHNcbiAgaWYgKHByaWNlIDw9IDApIHJldHVybiAwO1xuICBpZiAoVCA8PSAwKSByZXR1cm4gMDtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJzOyBpKyspIHtcbiAgICBjb25zdCBtaWQgPSAwLjUgKiAobG8gKyBoaSk7XG4gICAgY29uc3QgcG0gPSBic1ByaWNlKGNwLCBTLCBLLCByLCBxLCBtaWQsIFQpO1xuICAgIGlmIChwbSA+IHByaWNlKSBoaSA9IG1pZDsgZWxzZSBsbyA9IG1pZDtcbiAgfVxuICByZXR1cm4gMC41ICogKGxvICsgaGkpO1xufSJdLCJuYW1lcyI6WyJlcmYiLCJ4Iiwic2lnbiIsImExIiwiYTIiLCJhMyIsImE0IiwiYTUiLCJwIiwiYXgiLCJNYXRoIiwiYWJzIiwidCIsInkiLCJleHAiLCJub3JtQ0RGIiwiU1FSVDIiLCJub3JtUERGIiwic3FydCIsIlBJIiwiYnNQcmljZSIsImNwIiwiUyIsIksiLCJyIiwicSIsInNpZ21hIiwiVCIsIm1heCIsInNxcnRUIiwiZDEiLCJsb2ciLCJkMiIsImdyZWVrcyIsImRlbHRhIiwiZ2FtbWEiLCJ2ZWdhIiwidGhldGEiLCJyaG8iLCJwZGYiLCJpbXBsaWVkVm9sIiwicHJpY2UiLCJsbyIsImhpIiwiaXRlcnMiLCJpIiwibWlkIiwicG0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/math/blackscholes.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/../node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstream%2Froute&page=%2Fapi%2Fstream%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstream%2Froute.ts&appDir=%2FUsers%2Fericzhang%2FDesktop%2FProjects%2FVolatix-main%2FVolatix-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fericzhang%2FDesktop%2FProjects%2FVolatix-main%2FVolatix-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();